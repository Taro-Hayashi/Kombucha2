# Kombucha ジョイスティック
[meishi Trackball Moduleを使う場合はこちら](README_BALL.md)
- [キット内容](#キット内容)
- [準備](#準備)
- [はんだ付け](#はんだ付け)
- [組み立て](#組み立て)
- [カスタマイズ](#カスタマイズ)
- [その他](#その他)

## キット内容
![パーツ一覧](img/IMG_4844.jpg)  
||部品名|数| |
|-|-|-|-|
|1|メインボード|1||
|2|ジョイスティック基板|1||
|3|トッププレート|1||
|4|ボトムプレート|1||
|5|アクリルプレート|4||
|6|スペーサー（細）（短）|4|※使用しません|
|7|スペーサー（細）（長）|4|黄銅・7mm|
|8|スペーサー（太）（短）|9|ステンレス・7mm|
|9|スペーサー（太）（長）|12|ステンレス・16mm|
|10|ねじ（短）|14|黒・4mm|
|11|ねじ（長）|12|銀・6mm|
|12|スプリング|4|※使用しません|
|13|5ピンヘッダ|2||
|14|7ピンヘッダ|3||
|15|5ピンソケット|1||
|16|7ピンソケット|1||
|17|スイッチソケット|9||
|18|ホイールエンコーダー|1|11mm|
|19|ホイール|1||
|20|ジョイスティック|1||
|21|キャップ|1||
|22|タクタイルスイッチ|1|7.5mm|
|23|タクタイルスイッチSMD|1|※使用しません|
|24|ダイオード|11||
|25|LED|9||
|26|ゴム足|4|

### キット以外に必要なもの
|部品名|数||
|-|-|-|
|XIAO RP2040|1||
|Cherry MX互換キースイッチ|1||
|1Uキーキャップ|1||
|Type-C USB ケーブル|1||

### オプション
|部品名|数||
|-|-|-|
|Trackball Module 互換基板キット|1|meishiから切り離さなくてよくなります。|
|アクリル積層ケース||取り付け方法|
 
### 必要な工具
|工具名|
|-|
|はんだごて|
|はんだ|
|精密ドライバー|
|ニッパー|
|エポシキ接着剤|

## 準備
### 左右を決める
このキットは基板の表裏を変えることで左手用と右手用を作り分けることができます。  
どちらの面にどの部品を実装するかが基板に書いてあるので参考にしてください。  
※ビルドガイドの写真はすべて左手用です。右手の場合は適宜読み替えて制作してください。  

### XIAO RP2040にファームウェアを書き込む
こちらのファイルをダウンロードしてください。
- 
右のBのボタンを押しながらPCに接続するとRPI-RP2というドライブとして認識されます。


## はんだ付け
### ボトムプレートのはんだ付け
左右を確認してボトムプレートにピンソケットをはんだ付けします。  
位置決めが難しい場合、使っているうちに剥がれた場合などはDIPタイプのピンソケットも使用することができます。  

次の工程のためにボトムプレートのピンソケットと同じ側にスペーサー（細）（長）をねじ（短）で止めます。  

### ジョイスティック基板のはんだ付け
ジョイスティック基板にジョイスティックをはんだ付けします。  

ボトムプレートのピンソケットに5ピンヘッダを立てます。短い方を差しました。  

スペーサー（太）（長）でジョイスティック基板をボトムプレートに固定します。  

ピンヘッダをニッパーで切りはんだ付けしましょう。  

### メインボードのはんだ付け



LEDをはんだ付けします。欠けている方向と白い線が合うように置きます。  

LEDは取り付けなくても動作するのでお好みで使ってください。  

## 組み立て
USBケーブルを抜いてプレートを組付けます。    
アクリルからは保護フィルムを剥がしてください。割れやすいので気をつけましょう。   



## カスタマイズ
標準ではジョイスティックを傾けると方向に合わせてW、A、S、Dのキーが入力されるようになっています。これらを含めた全てのキーはVIAというWebサイト経由ですきなものに変更することができます。
こちらのJSONファイルをダウンロードしてください。

Google Chrome（Microsoft Edge）を利用して下記webサイトにアクセスするか、VIAのアプリケーションをダウンロードして起動してください。

DESIGNタブのLoadでダウンロードしたJSONファイルを読み込ませるとキーの変更が出来るようになります。

CONFIGUREタブのAuthorize device+からKombuchaを追加してください。

### 左右の変更
LAYOUTSタブから見た目の左右を変更することができます。

### ホイールの割り当てキー
キーマップ変更画面で上部の丸をクリックするとホイールを回転させた時と押し込んだ時に入力されるキーを変更することができます。
  
### その他の利用方法
ジョイスティックでマウスカーソルを動かすことも可能で、その場合はこちらのファイルをダウンロードしてファームウェアを書き換えてください。
Bボタンを押す代わりにXIAO RP2040に一番近いキーを押しながらUSBケーブルを繋ぐことでもRPI-RP2のドライブを出すことが出来ます。
- cursor.uf2

こちらのファームウェアを書き込むことでKombuchaをゲームパッドとして認識させることもできます。
- joypad.uf2

## その他

ファームウェアのフォルダ(0.19.10現在developブランチでのみコンパイル可能です。
- https://github.com/Taro-Hayashi/qmk_firmware/tree/tarohayashi/keyboards/tarohayashi/kombucha

プレートのデザインデータ  
- [kombucha_plates.zip](https://github.com/Taro-Hayashi/Kombucha/releases/download/14.31/kombucha_plates.zip)  
発注先のルールに沿ってデータを修正してください。  
  
- BOOTH: https://tarohayashi.booth.pm/items/3252673 
